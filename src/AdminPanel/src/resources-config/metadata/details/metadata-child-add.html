<template>
    <require from="common/components/entity-chooser/entity-chooser"></require>
    <require from="../metadata-form"></require>

    <div class="well fade-inout-updown au-animate floating-form-full-width">
        <ul class="nav nav-pills">
            <li class="active">
                <a href="#chooseExisting"
                    data-toggle="tab">
                    <span class="fa fa-list fa-fw"></span>
                    ${'Choose existing' | t}
                </a>
            </li>
            <li>
                <a href="#addNew"
                    data-toggle="tab">
                    <span class="fa fa-plus fa-fw"></span>
                    ${'Add new' | t}
                </a>
            </li>
        </ul>
        <div class="tab-content">
            <div class="tab-pane fade active in"
                id="chooseExisting">
                <h2>${'Choose existing submetadata kind' | t}</h2>
                <entity-chooser value.bind="baseMetadata"
                    entities.bind="metadataList"
                    exclude-entities.bind="parentMetadataChildren"></entity-chooser>
                <metadata-form if.bind="baseMetadata"
                    template.bind="baseMetadata"
                    submit.call="addChildMetadata(parentMetadata.id, baseMetadata.id, editedMetadata)"></metadata-form>
            </div>
            <div class="tab-pane fade"
                id="addNew">
                <h2>${'Add new submetadata kind' | t}</h2>
                <metadata-form submit.call="createChildMetadata(parentMetadata.id, editedMetadata)"></metadata-form>
            </div>
        </div>
    </div>
</template>
