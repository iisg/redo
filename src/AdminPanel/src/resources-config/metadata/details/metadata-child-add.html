<template>
    <require from="common/components/entity-chooser/entity-chooser"></require>
    <require from="../metadata-form"></require>

    <div class="well fade-inout-updown au-animate">
        <ul class="nav nav-pills">
            <li class="active">
                <a href="#chooseExisting"
                    data-toggle="tab">
                    <icon name="document"></icon>
                    ${'Choose existing' | t}
                </a>
            </li>
            <li>
                <a href="#addNew"
                    data-toggle="tab">
                    <icon name="resource-2"></icon>
                    ${'Add new' | t}
                </a>
            </li>
        </ul>
        <div class="tab-content">
            <div class="tab-pane fade active in"
                id="chooseExisting">
                <h2>${'Choose existing submetadata kind' | t}</h2>
                <div class="form-group">
                    <entity-chooser value.bind="baseMetadata"
                        entities.bind="metadataList"
                        filter.bind="notAlreadyInParent"></entity-chooser>
                </div>
                <div class="form-group">
                    <metadata-form if.bind="baseMetadata"
                        template.bind="baseMetadata"
                        submit.call="addChildMetadata(parentMetadata.id, baseMetadata.id, editedMetadata)"
                        resource-class.bind="resourceClass"></metadata-form>
                </div>
            </div>
            <div class="tab-pane fade"
                id="addNew">
                <h2>${'Add new submetadata kind' | t}</h2>
                <metadata-form submit.call="createChildMetadata(parentMetadata.id, editedMetadata)"
                    resource-class.bind="resourceClass"></metadata-form>
            </div>
        </div>
    </div>
</template>
