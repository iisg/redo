<template>
    <require from="./graph/workflow-graph-display"></require>
    <require from="./excel/excel"></require>
    <require from="common/components/fab/fab-edit"></require>
    <require from="./workflow-edit-form"></require>

    <loading-bar if.bind="!workflow"></loading-bar>

    <div if.bind="workflow"
        class="au-animate fade-inup-outup">

        <div class="pull-right">
            <pending-throbber entity.bind="workflow"></pending-throbber>
            <button class="btn btn-fab btn-fab-mini btn-raised btn-danger"
                type="button"
                click.trigger="deleteWorkflow()"
                if.bind="!editing"
                disabled.bind="workflow.pendingRequest">
                <fa name="trash"></fa>
            </button>
            <fab-edit editing.bind="editing"
                disabled.bind="workflow.pendingRequest"
                click.trigger="toggleEditForm()"></fab-edit>
        </div>

        <h1>${workflow.name | inCurrentLanguage & signal:UPDATE_SIGNAL}</h1>

        <div if.bind="!editing">
            <workflow-graph-display workflow.bind="workflow"></workflow-graph-display>
            <excel workflow.bind="workflow"
                resource-class.bind="workflow.resourceClass"></excel>
        </div>

        <div if.bind="editing">
            <workflow-edit-form workflow.bind="workflow"
                submit.delegate="update()"
                resource-class.bind="workflow.resourceClass"></workflow-edit-form>
        </div>

    </div>
</template>
