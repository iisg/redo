<template>
    <require from="common/components/font-awesome/fa"></require>
    <require from="./resource-metadata-values-form"></require>
    <require from="resources-config/metadata/metadata-label"></require>
    <require from="./max-count-constraint-info"></require>

    <div class="form-group"
        repeat.for="metadata of metadataList">
        <h4>
            ${metadata | metadataLabel}
            <max-count-constraint-info metadata.bind="metadata"
                value-count.bind="resource.contents[metadata.baseId].length"></max-count-constraint-info>
        </h4>
        <div class="clearfix"></div>
        <div if.bind="metadataDeterminesAssignee(metadata)"
            class="alert alert-info">
            <fa name="user-circle"></fa>
            ${'This metadata determines who can perform these actions:' | t}
            <ul>
                <li repeat.for="transition of resource.transitionAssigneeMetadata[metadata.baseId]">
                    ${transition.label | inCurrentLanguage}
                </li>
            </ul>
        </div>
        <div if.bind="metadataIsRequired(metadata)"
            class="alert alert-warning">
            <fa name="info-circle"></fa>
            ${"This metadata is required in current state" | t}
        </div>
        <div if.bind="metadataIsLocked(metadata)"
            class="alert alert-info">
            <fa name="info-circle"></fa>
            ${"Resource's state prevents modification of these values." | t}
        </div>
        <resource-metadata-values-form metadata.bind="metadata"
            resource.bind="resource"
            disabled.bind="editingDisabledForMetadata(metadata)"
            required.bind="metadataIsRequired(metadata)"></resource-metadata-values-form>
    </div>
</template>
