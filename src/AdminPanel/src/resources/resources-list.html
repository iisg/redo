<template>
    <require from="./add/resource-form"></require>
    <require from="common/components/buttons/add-button"></require>
    <require from="common/components/pagination/pagination"></require>
    <require from="./resources-list-table"></require>
    <require from="./workflow/resource-place-display.html"></require>

    <div class="resources-list ${addFormOpened ? 'add-form-opened' : ''}">
        <pagination total-number-of-elements.bind="totalNumberOfResources"
            elements-per-page.bind="resultsPerPage"
            current-page-number.bind="currentPageNumber"
            hide-elements-per-page-dropdown="true"></pagination>
        <add-button entity-name="resource"
            toggled.two-way="addFormOpened"
            disabled.bind="parentResource.pendingRequest"></add-button>

        <div if.bind="addFormOpened"
            class="fade-inup-outdown au-animate well">
            <resource-form resource-class.bind="resourceClass"
                submit.call="addNewResource(savedResource)"
                parent.bind="parentResource"></resource-form>
        </div>

        <loading-bar if.bind="displayProgressBar"></loading-bar>

        <resources-list-table show.bind="!resources || resources.length > 0"
            resources.bind="resources"
            column-metadata.bind="briefMetadata"
            resource-class.bind="resourceClass"
            sort-by.bind="sortBy"></resources-list-table>

        <div class="alert alert-info"
            if.bind="resources.length === 0 && !displayProgressBar">
            <icon name="information"></icon>
            ${'No resources.' | resourceClassTranslation:resourceClass}
        </div>

        <pagination containerless
        total-number-of-elements.bind="totalNumberOfResources"
            elements-per-page.bind="resultsPerPage"
            current-page-number.bind="currentPageNumber"></pagination>
    </div>
</template>
