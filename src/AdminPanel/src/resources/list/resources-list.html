<template class="${addFormOpened ? 'add-form-opened' : ''}">
    <require from="common/components/buttons/add-button.html"></require>
    <require from="common/components/pagination/pagination"></require>
    <require from="./resources-list-table"></require>
    <require from="../add/resource-form"></require>
    <require from="../workflow/resource-place-display.html"></require>
    <require from="common/components/resource-kind/resource-kind-chooser/resource-kind-chooser"></require>
    <require from="common/components/buttons/cancel-button.html"></require>
    <require from="common/components/loading-bar/loading-cover"></require>

    <div if.bind="!metadata && !resourceKind && !parentResource"
        class="resources-list-title">
        <span if.bind="displayAllLevels"
            class="page-title">${'Search results' | t}</span>
        <span else
            class="page-title">${'Top level resources' | resourceClassTranslation:resourceClass}</span>
    </div>

    <pagination total-number-of-elements.bind="totalNumberOfResources"
        elements-per-page.bind="resultsPerPage"
        current-page-number.bind="currentPageNumber"
        hide-elements-per-page-dropdown="true"></pagination>
    <add-button if.bind="!hideAddButton && !addFormOpened"
        entity-name="resource"
        toggled.two-way="addFormOpened"
        disabled.bind="addingResourcesDisabled"
        disability-reason.bind="disabilityReason"></add-button>
    <div if.bind="!hideAddButton && addFormOpened"
        class="add-form well fade-inup-outdown au-animate">
        <span>${'Add new resource' | resourceClassTranslation:resourceClass}</span>

        <div class="resource-kind-chooser-with-cancel-button">
            <resource-kind-chooser
                hide-clear-button.one-time="true"
                resource-class.bind="resourceClass"
                filter.one-time="createResourceKindFilter()"
                value.bind="newResourceKindThrottled"></resource-kind-chooser>
            <cancel-button if.bind="!newResourceKindThrottled"
                class="orange"
                label="Close"
                click.delegate="addFormOpened = false"></cancel-button>
        </div>
        <resource-form if="condition.bind: newResourceKind; cache: false"
            class="form-with-sticky-buttons"
            resource-kind.bind="newResourceKind"
            resource-class.bind="resourceClass"
            parent.bind="parentResource"
            submit.call="addNewResource(savedResource)"
            cancel.call="addFormOpened = !addFormOpened"></resource-form>
    </div>
    <loading-cover loading.bind="displayProgressBar"
        class="resource-list-table-container">
        <resources-list-table resources.bind="resources"
            column-metadata.bind="briefMetadata"
            resource-class.bind="resourceClass"
            disabled-metadata.bind="metadata"
            sort-by.bind="sortBy"
            contents-filter.bind="contentsFilter"
            places-filter.bind="placesFilter"
            resource-kinds.bind="resourceKinds"></resources-list-table>
    </loading-cover>
    <div class="alert alert-info"
        if.bind="resources.length === 0 && !displayProgressBar">
        <icon name="information"></icon>
        ${'No resources.' | resourceClassTranslation:resourceClass}
    </div>
    <pagination containerless
        total-number-of-elements.bind="totalNumberOfResources"
        elements-per-page.bind="resultsPerPage"
        current-page-number.bind="currentPageNumber"></pagination>
    <slot></slot>
</template>
