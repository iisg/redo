<template>
    <require from="resources/workflow/resource-place-display.html"></require>
    <require from="resources/details/resource-metadata-table/resource-metadata-values"></require>
    <require from="resources-config/metadata/metadata-label"></require>

    <div class="col-xs-12">
        <table class="table table-striped"
            if.bind="resources.length > 0">
            <thead>
            <tr>
                <th>${'ID' | t}</th>
                <th>${'Resource kind' | t}</th>
                <th repeat.for="metadata of columnMetadata">
                    ${metadata | metadataLabel}
                </th>
                <th>${'Place' | t}</th>
                <th repeat.for="name of extraColumnNames">${name | t}</th>
                <th></th>
            </tr>
            </thead>
            <tfoot>
            <tr if.bind="resources === undefined">
                <th colspan="6">
                    <loading-bar></loading-bar>
                </th>
            </tr>
            </tfoot>
            <tbody class="au-stagger">
            <tr repeat.for="resource of resources"
                hover-aware.one-time="resource"
                class="au-animate fade-inup-outdown"
                go-to-link-on-row-click=".btn-details">
                <td>${resource.id & oneTime}</td>
                <td>
                    ${resource.kind.label | inCurrentLanguage}
                </td>
                <td repeat.for="metadata of columnMetadata">
                    <resource-metadata-values resource.one-time="resource"
                        metadata.one-time="metadata"></resource-metadata-values>
                </td>
                <td>
                    <resource-place-display resource.bind="resource"></resource-place-display>
                </td>
                <td repeat.for="view of extraColumnViews">
                    <compose view.bind="view"></compose>
                </td>
                <td>
                    <span class="pull-right text-nowrap">
                        <pending-throbber entity.bind="resource"></pending-throbber>
                        <a class="btn ${resource.hovered ? 'btn-raised' : ''} btn-info btn-sm btn-details"
                            route-href="route: resources/details; params.bind: {id: resource.id}"
                            disabled-link.bind="resource.pendingRequest">
                            <fa name="eye fw"></fa>
                        </a>
                    </span>
                </td>
            </tr>
            </tbody>
        </table>

        <div show.bind="resources.length === 0">
            <slot name="empty">
                ${"No resources." | t}
            </slot>
        </div>
    </div>
</template>
