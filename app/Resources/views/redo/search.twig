{% extends "redo/layout.twig" %}

{% set page_title = 'Wyniki wyszukiwania' %}

{% block content %}
    <div class="content home-page-content">
        <search-bar phrase="{{ phrase }}"></search-bar>
    </div>

    <h1>Wyniki wyszukiwania ({{ results|length }})</h1>

    <div class="search-hits">
        {% for result in results %}
            {% set resource = result.data.contents | ftsContentsToResource %}
            <div class="search-hit">
                <div class="score">{{ result.score | number_format(1) }}%</div>
                <h3><a href="/resources/{{ result.id }}">{{ resource | mLabel }} (#{{ result.id }})</a></h3>
                <p>{{ resource | mOpis }}</p>
                <div class="highlights">
                    {% for fieldName, highlights in result.highlights %}
                        {% for highlight in highlights %}
                            <p>{{ highlight | raw }}</p>
                        {% endfor %}
                    {% endfor %}
                </div>
            </div>
        {% endfor %}
    </div>
{% endblock %}
